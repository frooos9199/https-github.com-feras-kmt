
> kmt-marshal-system@1.0.0 dev
> next dev

‚ö† Warning: Next.js inferred your workspace root, but it may not be correct.
 We detected multiple lockfiles and selected the directory of /Users/mac/Documents/package-lock.json as the root directory.
 To silence this warning, set `turbopack.root` in your Next.js config, or consider removing one of the lockfiles if it's not needed.
   See https://nextjs.org/docs/app/api-reference/config/next-config-js/turbopack#root-directory for more information.
 Detected additional lockfiles: 
   * /Users/mac/Documents/GitHub/kmtmaster/https-github.com-feras-kmt/package-lock.json
   * /Users/mac/Documents/GitHub/kmtmaster/yarn.lock

‚ñ≤ Next.js 16.1.0 (Turbopack)
- Local:         http://localhost:3000
- Network:       http://192.168.8.68:3000
- Environments: .env.local, .env
- Experiments (use with caution):
  ¬∑ serverActions

‚úì Starting...
‚úì Ready in 551ms
 POST /api/auth/login 401 in 2.7s (compile: 186ms, render: 2.5s)
 POST /api/auth/login 401 in 780ms (compile: 2ms, render: 778ms)
 GET /api/profile 404 in 556ms (compile: 153ms, render: 403ms)
 GET /api/admin/stats 200 in 3.7s (compile: 17ms, render: 3.7s)
  Reload env: .env.local
 POST /api/auth/login 200 in 2.3s (compile: 131ms, render: 2.1s)
[FCM-TOKEN] üîë Authorization header: Present
[FCM-TOKEN] üìù JWT Token (first 30 chars): eyJhbGciOiJIUzI1NiIsInR5cCI6Ik
[FCM-TOKEN] ‚úÖ JWT verified, user email: summit_kw@hotmail.com
[FCM-TOKEN] üíæ Updating FCM token for user: summit_kw@hotmail.com
[FCM-TOKEN] ‚úÖ FCM token updated successfully
 POST /api/user/fcm-token 200 in 472ms (compile: 64ms, render: 408ms)
‚úÖ Firebase Admin initialized successfully
Decoded user: {
  id: 'cmjcnxesq0005l504837u6wp3',
  employeeId: 'KMT-511',
  name: 'FERAS ALOTAIBI',
  email: 'summit_kw@hotmail.com',
  password: '$2a$12$BY3ifF0jDNHfLNRWbu6M5.9CTbVKRaI5YSs6JQbxzNChV2b2KyW3.',
  phone: '50540999',
  civilId: '0000000000000',
  dateOfBirth: 1980-04-02T00:00:00.000Z,
  nationality: 'KW',
  bloodType: 'O+',
  image: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610519/kmt/profile_1765610519394_2ehsi3.jpg',
  civilIdImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610566/kmt/civilId_1765610566280_um6qa9.jpg',
  civilIdBackImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610638/kmt/civilIdBack_1765610638466_3ieyrh.jpg',
  licenseFrontImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610589/kmt/licenseFront_1765610589195_h7tz66.jpg',
  licenseBackImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610608/kmt/licenseBack_1765610607908_9qwrkw.jpg',
  isActive: true,
  marshalTypes: 'circuit',
  role: 'admin',
  fcmToken: 'fXxsi56iuE-ZhKD0p9au3Z:APA91bGS3Rm3p-H3oUUEeTgDTtYJeqkCLJZsejt3WZLUcGK8Zrnha2Mom5_i3rraEdDypt1U38LR4x2WZaylydgJ7TeHvGFE3R5Bfv5DKDDs-4XvywBIrqE',
  resetToken: null,
  resetTokenExpiry: null,
  createdAt: 2025-12-19T09:24:18.603Z,
  updatedAt: 2025-12-21T05:40:58.613Z
}
 GET /api/notifications 200 in 1190ms (compile: 44ms, render: 1146ms)
Decoded user: {
  id: 'cmjcnxesq0005l504837u6wp3',
  employeeId: 'KMT-511',
  name: 'FERAS ALOTAIBI',
  email: 'summit_kw@hotmail.com',
  password: '$2a$12$BY3ifF0jDNHfLNRWbu6M5.9CTbVKRaI5YSs6JQbxzNChV2b2KyW3.',
  phone: '50540999',
  civilId: '0000000000000',
  dateOfBirth: 1980-04-02T00:00:00.000Z,
  nationality: 'KW',
  bloodType: 'O+',
  image: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610519/kmt/profile_1765610519394_2ehsi3.jpg',
  civilIdImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610566/kmt/civilId_1765610566280_um6qa9.jpg',
  civilIdBackImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610638/kmt/civilIdBack_1765610638466_3ieyrh.jpg',
  licenseFrontImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610589/kmt/licenseFront_1765610589195_h7tz66.jpg',
  licenseBackImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610608/kmt/licenseBack_1765610607908_9qwrkw.jpg',
  isActive: true,
  marshalTypes: 'circuit',
  role: 'admin',
  fcmToken: 'fXxsi56iuE-ZhKD0p9au3Z:APA91bGS3Rm3p-H3oUUEeTgDTtYJeqkCLJZsejt3WZLUcGK8Zrnha2Mom5_i3rraEdDypt1U38LR4x2WZaylydgJ7TeHvGFE3R5Bfv5DKDDs-4XvywBIrqE',
  resetToken: null,
  resetTokenExpiry: null,
  createdAt: 2025-12-19T09:24:18.603Z,
  updatedAt: 2025-12-21T05:40:58.613Z
}
 GET /api/admin/events 200 in 2.0s (compile: 167ms, render: 1860ms)
Decoded user: {
  id: 'cmjcnxesq0005l504837u6wp3',
  employeeId: 'KMT-511',
  name: 'FERAS ALOTAIBI',
  email: 'summit_kw@hotmail.com',
  password: '$2a$12$BY3ifF0jDNHfLNRWbu6M5.9CTbVKRaI5YSs6JQbxzNChV2b2KyW3.',
  phone: '50540999',
  civilId: '0000000000000',
  dateOfBirth: 1980-04-02T00:00:00.000Z,
  nationality: 'KW',
  bloodType: 'O+',
  image: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610519/kmt/profile_1765610519394_2ehsi3.jpg',
  civilIdImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610566/kmt/civilId_1765610566280_um6qa9.jpg',
  civilIdBackImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610638/kmt/civilIdBack_1765610638466_3ieyrh.jpg',
  licenseFrontImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610589/kmt/licenseFront_1765610589195_h7tz66.jpg',
  licenseBackImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610608/kmt/licenseBack_1765610607908_9qwrkw.jpg',
  isActive: true,
  marshalTypes: 'circuit',
  role: 'admin',
  fcmToken: 'fXxsi56iuE-ZhKD0p9au3Z:APA91bGS3Rm3p-H3oUUEeTgDTtYJeqkCLJZsejt3WZLUcGK8Zrnha2Mom5_i3rraEdDypt1U38LR4x2WZaylydgJ7TeHvGFE3R5Bfv5DKDDs-4XvywBIrqE',
  resetToken: null,
  resetTokenExpiry: null,
  createdAt: 2025-12-19T09:24:18.603Z,
  updatedAt: 2025-12-21T05:40:58.613Z
}
 GET /api/notifications 200 in 2.6s (compile: 193ms, render: 2.4s)
 GET /api/admin/attendance 200 in 3.4s (compile: 186ms, render: 3.2s)
 GET /api/admin/stats 200 in 3.3s (compile: 27ms, render: 3.3s)
API EVENT GET {
  url: 'http://localhost:3000/api/admin/events/cmjemmea70000lb0464ejqzj6',
  headers: {
    accept: 'application/json',
    'accept-encoding': 'gzip, deflate',
    'accept-language': 'en-GB,en-US;q=0.9,en;q=0.8',
    authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWpjbnhlc3EwMDA1bDUwNDgzN3U2d3AzIiwiaWQiOiJjbWpjbnhlc3EwMDA1bDUwNDgzN3U2d3AzIiwiZW1haWwiOiJzdW1taXRfa3dAaG90bWFpbC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NjYyOTU2NTgsImV4cCI6MTc2NjkwMDQ1OH0.8kPeM0zDI5mJihdnnQleaTODUAmVbbC8s50kJbeZtwg',
    connection: 'keep-alive',
    'content-type': 'application/json',
    host: '192.168.8.68:3000',
    'user-agent': 'kmtsysApp/1 CFNetwork/3860.200.71 Darwin/25.1.0',
    'x-forwarded-for': '::ffff:192.168.8.68',
    'x-forwarded-host': '192.168.8.68:3000',
    'x-forwarded-port': '3000',
    'x-forwarded-proto': 'http'
  },
  params: { id: 'cmjemmea70000lb0464ejqzj6' }
}
Decoded user: {
  id: 'cmjcnxesq0005l504837u6wp3',
  employeeId: 'KMT-511',
  name: 'FERAS ALOTAIBI',
  email: 'summit_kw@hotmail.com',
  password: '$2a$12$BY3ifF0jDNHfLNRWbu6M5.9CTbVKRaI5YSs6JQbxzNChV2b2KyW3.',
  phone: '50540999',
  civilId: '0000000000000',
  dateOfBirth: 1980-04-02T00:00:00.000Z,
  nationality: 'KW',
  bloodType: 'O+',
  image: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610519/kmt/profile_1765610519394_2ehsi3.jpg',
  civilIdImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610566/kmt/civilId_1765610566280_um6qa9.jpg',
  civilIdBackImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610638/kmt/civilIdBack_1765610638466_3ieyrh.jpg',
  licenseFrontImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610589/kmt/licenseFront_1765610589195_h7tz66.jpg',
  licenseBackImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610608/kmt/licenseBack_1765610607908_9qwrkw.jpg',
  isActive: true,
  marshalTypes: 'circuit',
  role: 'admin',
  fcmToken: 'eFcy4YAOPU-8mumR9FyU4W:APA91bGzRIyrphfxcRgxcu97rhQZJKYXDZjTxC3r4zdHWMOtFnskyRmfNqN1SK4oV6W0feMq7dvBkvAbLsoxJYsawlsYxUe6AP9f9D4isf0JGddyt8Lw9PI',
  resetToken: null,
  resetTokenExpiry: null,
  createdAt: 2025-12-19T09:24:18.603Z,
  updatedAt: 2025-12-21T05:41:49.882Z
}
 GET /api/admin/events/cmjemmea70000lb0464ejqzj6 200 in 2.9s (compile: 774ms, render: 2.1s)
 GET /api/admin/events 200 in 2.6s (compile: 112ms, render: 2.5s)
API EVENT GET {
  url: 'http://localhost:3000/api/admin/events/cmjemmea70000lb0464ejqzj6',
  headers: {
    accept: 'application/json',
    'accept-encoding': 'gzip, deflate',
    'accept-language': 'en-GB,en-US;q=0.9,en;q=0.8',
    authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJjbWpjbnhlc3EwMDA1bDUwNDgzN3U2d3AzIiwiaWQiOiJjbWpjbnhlc3EwMDA1bDUwNDgzN3U2d3AzIiwiZW1haWwiOiJzdW1taXRfa3dAaG90bWFpbC5jb20iLCJyb2xlIjoiYWRtaW4iLCJpYXQiOjE3NjYyOTU2NTgsImV4cCI6MTc2NjkwMDQ1OH0.8kPeM0zDI5mJihdnnQleaTODUAmVbbC8s50kJbeZtwg',
    connection: 'keep-alive',
    'content-type': 'application/json',
    host: '192.168.8.68:3000',
    'user-agent': 'kmtsysApp/1 CFNetwork/3860.200.71 Darwin/25.1.0',
    'x-forwarded-for': '::ffff:192.168.8.68',
    'x-forwarded-host': '192.168.8.68:3000',
    'x-forwarded-port': '3000',
    'x-forwarded-proto': 'http'
  },
  params: { id: 'cmjemmea70000lb0464ejqzj6' }
}
Decoded user: {
  id: 'cmjcnxesq0005l504837u6wp3',
  employeeId: 'KMT-511',
  name: 'FERAS ALOTAIBI',
  email: 'summit_kw@hotmail.com',
  password: '$2a$12$BY3ifF0jDNHfLNRWbu6M5.9CTbVKRaI5YSs6JQbxzNChV2b2KyW3.',
  phone: '50540999',
  civilId: '0000000000000',
  dateOfBirth: 1980-04-02T00:00:00.000Z,
  nationality: 'KW',
  bloodType: 'O+',
  image: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610519/kmt/profile_1765610519394_2ehsi3.jpg',
  civilIdImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610566/kmt/civilId_1765610566280_um6qa9.jpg',
  civilIdBackImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610638/kmt/civilIdBack_1765610638466_3ieyrh.jpg',
  licenseFrontImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610589/kmt/licenseFront_1765610589195_h7tz66.jpg',
  licenseBackImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610608/kmt/licenseBack_1765610607908_9qwrkw.jpg',
  isActive: true,
  marshalTypes: 'circuit',
  role: 'admin',
  fcmToken: 'eFcy4YAOPU-8mumR9FyU4W:APA91bGzRIyrphfxcRgxcu97rhQZJKYXDZjTxC3r4zdHWMOtFnskyRmfNqN1SK4oV6W0feMq7dvBkvAbLsoxJYsawlsYxUe6AP9f9D4isf0JGddyt8Lw9PI',
  resetToken: null,
  resetTokenExpiry: null,
  createdAt: 2025-12-19T09:24:18.603Z,
  updatedAt: 2025-12-21T05:41:49.882Z
}
 GET /api/admin/events/cmjemmea70000lb0464ejqzj6 200 in 2.2s (compile: 7ms, render: 2.2s)
 POST /api/auth/login 200 in 950ms (compile: 4ms, render: 946ms)
[FCM-TOKEN] üîë Authorization header: Present
[FCM-TOKEN] üìù JWT Token (first 30 chars): eyJhbGciOiJIUzI1NiIsInR5cCI6Ik
[FCM-TOKEN] ‚úÖ JWT verified, user email: summit_kw@hotmail.com
[FCM-TOKEN] üíæ Updating FCM token for user: summit_kw@hotmail.com
[FCM-TOKEN] ‚úÖ FCM token updated successfully
 POST /api/user/fcm-token 200 in 472ms (compile: 3ms, render: 468ms)
Decoded user: {
  id: 'cmjcnxesq0005l504837u6wp3',
  employeeId: 'KMT-511',
  name: 'FERAS ALOTAIBI',
  email: 'summit_kw@hotmail.com',
  password: '$2a$12$BY3ifF0jDNHfLNRWbu6M5.9CTbVKRaI5YSs6JQbxzNChV2b2KyW3.',
  phone: '50540999',
  civilId: '0000000000000',
  dateOfBirth: 1980-04-02T00:00:00.000Z,
  nationality: 'KW',
  bloodType: 'O+',
  image: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610519/kmt/profile_1765610519394_2ehsi3.jpg',
  civilIdImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610566/kmt/civilId_1765610566280_um6qa9.jpg',
  civilIdBackImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610638/kmt/civilIdBack_1765610638466_3ieyrh.jpg',
  licenseFrontImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610589/kmt/licenseFront_1765610589195_h7tz66.jpg',
  licenseBackImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610608/kmt/licenseBack_1765610607908_9qwrkw.jpg',
  isActive: true,
  marshalTypes: 'circuit',
  role: 'admin',
  fcmToken: 'fXxsi56iuE-ZhKD0p9au3Z:APA91bGS3Rm3p-H3oUUEeTgDTtYJeqkCLJZsejt3WZLUcGK8Zrnha2Mom5_i3rraEdDypt1U38LR4x2WZaylydgJ7TeHvGFE3R5Bfv5DKDDs-4XvywBIrqE',
  resetToken: null,
  resetTokenExpiry: null,
  createdAt: 2025-12-19T09:24:18.603Z,
  updatedAt: 2025-12-21T06:08:39.941Z
}
 GET /api/notifications 200 in 1088ms (compile: 3ms, render: 1085ms)
Decoded user: {
  id: 'cmjcnxesq0005l504837u6wp3',
  employeeId: 'KMT-511',
  name: 'FERAS ALOTAIBI',
  email: 'summit_kw@hotmail.com',
  password: '$2a$12$BY3ifF0jDNHfLNRWbu6M5.9CTbVKRaI5YSs6JQbxzNChV2b2KyW3.',
  phone: '50540999',
  civilId: '0000000000000',
  dateOfBirth: 1980-04-02T00:00:00.000Z,
  nationality: 'KW',
  bloodType: 'O+',
  image: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610519/kmt/profile_1765610519394_2ehsi3.jpg',
  civilIdImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610566/kmt/civilId_1765610566280_um6qa9.jpg',
  civilIdBackImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610638/kmt/civilIdBack_1765610638466_3ieyrh.jpg',
  licenseFrontImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610589/kmt/licenseFront_1765610589195_h7tz66.jpg',
  licenseBackImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610608/kmt/licenseBack_1765610607908_9qwrkw.jpg',
  isActive: true,
  marshalTypes: 'circuit',
  role: 'admin',
  fcmToken: 'fXxsi56iuE-ZhKD0p9au3Z:APA91bGS3Rm3p-H3oUUEeTgDTtYJeqkCLJZsejt3WZLUcGK8Zrnha2Mom5_i3rraEdDypt1U38LR4x2WZaylydgJ7TeHvGFE3R5Bfv5DKDDs-4XvywBIrqE',
  resetToken: null,
  resetTokenExpiry: null,
  createdAt: 2025-12-19T09:24:18.603Z,
  updatedAt: 2025-12-21T06:08:39.941Z
}
Decoded user: {
  id: 'cmjcnxesq0005l504837u6wp3',
  employeeId: 'KMT-511',
  name: 'FERAS ALOTAIBI',
  email: 'summit_kw@hotmail.com',
  password: '$2a$12$BY3ifF0jDNHfLNRWbu6M5.9CTbVKRaI5YSs6JQbxzNChV2b2KyW3.',
  phone: '50540999',
  civilId: '0000000000000',
  dateOfBirth: 1980-04-02T00:00:00.000Z,
  nationality: 'KW',
  bloodType: 'O+',
  image: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610519/kmt/profile_1765610519394_2ehsi3.jpg',
  civilIdImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610566/kmt/civilId_1765610566280_um6qa9.jpg',
  civilIdBackImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610638/kmt/civilIdBack_1765610638466_3ieyrh.jpg',
  licenseFrontImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610589/kmt/licenseFront_1765610589195_h7tz66.jpg',
  licenseBackImage: 'https://res.cloudinary.com/dghmld0c3/image/upload/v1765610608/kmt/licenseBack_1765610607908_9qwrkw.jpg',
  isActive: true,
  marshalTypes: 'circuit',
  role: 'admin',
  fcmToken: 'fXxsi56iuE-ZhKD0p9au3Z:APA91bGS3Rm3p-H3oUUEeTgDTtYJeqkCLJZsejt3WZLUcGK8Zrnha2Mom5_i3rraEdDypt1U38LR4x2WZaylydgJ7TeHvGFE3R5Bfv5DKDDs-4XvywBIrqE',
  resetToken: null,
  resetTokenExpiry: null,
  createdAt: 2025-12-19T09:24:18.603Z,
  updatedAt: 2025-12-21T06:08:39.941Z
}
 GET /api/notifications 200 in 3.2s (compile: 6ms, render: 3.1s)
 GET /api/admin/attendance 200 in 4.2s (compile: 4ms, render: 4.2s)
